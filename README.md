# Marp Slide Interpretation Agent System

Marpãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’è§£æã—ã€MLX (Apple Siliconæœ€é©åŒ–) ãƒ­ãƒ¼ã‚«ãƒ«LLMã‚’ä½¿ç”¨ã—ã¦ã‚¹ãƒ©ã‚¤ãƒ‰ã®å†…å®¹æŠ½å‡ºã€ç”»åƒè§£æã€è¦ç´„ç”Ÿæˆã‚’è¡Œã†ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

## ğŸ“‹ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ã€æŠ€è¡“ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è³‡æ–™ (Marpå½¢å¼) ã‹ã‚‰ä»¥ä¸‹ã‚’è‡ªå‹•æŠ½å‡ºã—ã¾ã™:
- ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«ã¨æœ¬æ–‡å†…å®¹
- ç”»åƒå‚ç…§ã¨èª¬æ˜ (VLMä½¿ç”¨)
- å„ã‚¹ãƒ©ã‚¤ãƒ‰ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ (LLMæŠ½å‡º)
- ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®åŒ…æ‹¬çš„è¦ç´„

é•·æ–‡ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å¯¾ã—ã¦ã¯LangGraphã®map-reduceãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ä½¿ç”¨ã—ã€6æšä»¥ä¸Šã®ã‚¹ãƒ©ã‚¤ãƒ‰ã§è‡ªå‹•çš„ã«ãƒãƒ£ãƒ³ã‚¯å‡¦ç†ã¨æ®µéšçš„è¦ç´„ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

---

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SlideExtractor                          â”‚
â”‚  (ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å±¤ - å…¨ä½“ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SlideLoader â”‚                         â”‚ContentExtractorâ”‚
    â”‚  (è§£æ)      â”‚                         â”‚  (LLMå‡¦ç†)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                       â”‚
         â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚ LangGraph Pipelineâ”‚
    â”‚ImageProcessor â”‚                  â”‚  (map-reduce)     â”‚
    â”‚  (VLMå‡¦ç†)    â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸»è¦ã‚¯ãƒ©ã‚¹

| ã‚¯ãƒ©ã‚¹å | å½¹å‰² | ä¾å­˜ãƒ¢ãƒ‡ãƒ« |
|---------|------|-----------|
| `SlideExtractor` | ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å…¨ä½“ã®åˆ¶å¾¡ã€ãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰ | LLM + VLM |
| `SlideLoader` | Marpãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®ãƒ‘ãƒ¼ã‚¹ã€frontmatterå‡¦ç† | - |
| `ImageProcessor` | ç”»åƒè§£æã¨èª¬æ˜ç”Ÿæˆ | VLM (llava) |
| `ContentExtractor` | ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆæŠ½å‡ºã€è¦ç´„ç”Ÿæˆ | LLM (Phi-3) |

### ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ« (Pydantic)

- **`Slide`**: ã‚¹ãƒ©ã‚¤ãƒ‰æƒ…å ± (ã‚¿ã‚¤ãƒˆãƒ«ã€æœ¬æ–‡ã€ç”»åƒã€ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ)
- **`ImageReference`**: ç”»åƒãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ (alt, path)
- **`ImageDescription`**: ç”Ÿæˆã•ã‚ŒãŸç”»åƒèª¬æ˜
- **`ExtractionResult`**: å®Œå…¨ãªæŠ½å‡ºçµæœã¨ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- **`SummaryStateModel`**: LangGraphã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç†ç”¨

---

## ğŸš€ æ©Ÿèƒ½

### 1. ã‚¹ãƒ©ã‚¤ãƒ‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æŠ½å‡º
- **Marp frontmatterå¯¾å¿œ**: `python-frontmatter`ã§ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è§£æ
- **åŒºåˆ‡ã‚Šæ–‡å­—èªè­˜**: `---`ã§ã‚¹ãƒ©ã‚¤ãƒ‰åˆ†å‰²
- **ç”»åƒãƒ‘ã‚¹è§£æ±º**: ç›¸å¯¾ãƒ‘ã‚¹ â†’ çµ¶å¯¾ãƒ‘ã‚¹ã«è‡ªå‹•å¤‰æ›
- **HTML/ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°**: ç´”ç²‹ãªãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„æŠ½å‡º

### 2. ç”»åƒè§£æ (Vision-Language Model)
- **ãƒ¢ãƒ‡ãƒ«**: `mlx-community/llava-1.5-7b-4bit`
- **æ©Ÿèƒ½**: å„ç”»åƒã®å†…å®¹ã‚’æ—¥æœ¬èªã§èª¬æ˜ç”Ÿæˆ
- **çŠ¶æ…‹**: ç¾åœ¨ã¯PyTorchäº’æ›æ€§å•é¡Œã«ã‚ˆã‚Šãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å‹•ä½œ
  - ç”»åƒaltãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ™ãƒ¼ã‚¹ã« `[ç”»åƒ: {alt}]` å½¢å¼ã§å‡ºåŠ›

### 3. ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆæŠ½å‡º
- **ãƒ¢ãƒ‡ãƒ«**: `mlx-community/Phi-3-mini-4k-instruct-4bit`
- **å‡¦ç†å¯¾è±¡**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ€åˆã®3ã‚¹ãƒ©ã‚¤ãƒ‰ (ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–)
- **å‡ºåŠ›**: ã‚¹ãƒ©ã‚¤ãƒ‰ã”ã¨ã«3ã€œ5å€‹ã®è¦ç‚¹ã‚’æ—¥æœ¬èªã§ç”Ÿæˆ

### 4. é•·æ–‡ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå‡¦ç† (LangGraph)
- **ãƒˆãƒªã‚¬ãƒ¼æ¡ä»¶**: 6æšä»¥ä¸Šã®ã‚¹ãƒ©ã‚¤ãƒ‰ ã¾ãŸã¯ ç·æ–‡å­—æ•°2000è¶…
- **ãƒãƒ£ãƒ³ã‚¯æˆ¦ç•¥**:
  - ã‚¹ãƒ©ã‚¤ãƒ‰æ•°: 4æš/ãƒãƒ£ãƒ³ã‚¯
  - æ–‡å­—æ•°: 2000æ–‡å­—/ãƒãƒ£ãƒ³ã‚¯
- **map-reduceãƒ•ãƒ­ãƒ¼**:
  ```
  chunk â†’ map (å„ãƒãƒ£ãƒ³ã‚¯è¦ç´„) â†’ reduce (æ®µéšçš„çµ±åˆ) â†’ æœ€çµ‚è¦ç´„
  ```
- **ä¸¦åˆ—å‡¦ç†**: LangGraph StateGraphã§çŠ¶æ…‹ç®¡ç†

### 5. åŒ…æ‹¬çš„æ¦‚è¦ç”Ÿæˆ
- **æ–‡å­—æ•°åˆ¶é™**: 300æ–‡å­—ä»¥å†…
- **æƒ…å ±æº**:
  - å…¨ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«
  - LLMæŠ½å‡ºã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ
  - ç”»åƒæ•°ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  - ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆè¦ç´  (BOMã‚¹ãƒ©ã‚¤ãƒ‰ã‹ã‚‰)
- **ç”Ÿæˆæ–¹å¼**: ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ–ãƒ³ (LLMç”Ÿæˆã§ã¯ãªããƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹)
  - ç†ç”±: æ—¥æœ¬èªLLMå‡ºåŠ›ã®æ–‡å­—åŒ–ã‘å›é¿

---

## ğŸ“¤ å‡ºåŠ›

### 1. JSONå‡ºåŠ› (`extraction_results.json`)
```json
{
  "model": "mlx-community/Phi-3-mini-4k-instruct-4bit",
  "model_loaded": true,
  "metrics": {
    "total_slides": 10,
    "avg_content_length": 237,
    "titles_extracted": 10,
    "content_extraction_rate": 100.0
  },
  "slides_processed": [
    {
      "id": 1,
      "title": "Metsuke-Core",
      "raw": "...",
      "clean": "...",
      "images": [...],
      "image_descriptions": [...],
      "key_points": "- å‰£é“ã®åŸºæœ¬çš„ãªæŠ€è¡“ã‚’åˆ†æ\n- ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ããƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°"
    }
  ],
  "summary": "..."
}
```

### 2. Markdownå‡ºåŠ› (`summary.md`)
```markdown
# ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ ã‚¹ãƒ©ã‚¤ãƒ‰æŠ½å‡ºçµæœ

## ã‚¹ãƒ©ã‚¤ãƒ‰æ¦‚è¦
æœ¬è³‡æ–™ã¯10æšã®ã‚¹ãƒ©ã‚¤ãƒ‰ã§æ§‹æˆã•ã‚Œã€ã€ŒMetsuke-Coreã€ã¨ã„ã†...
(300æ–‡å­—ä»¥å†…ã®åŒ…æ‹¬çš„èª¬æ˜)

## ğŸ“Š æŠ½å‡ºå“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹
- ç·ã‚¹ãƒ©ã‚¤ãƒ‰æ•°: 10
- å¹³å‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é•·: 237 æ–‡å­—
- æŠ½å‡ºç‡: 100.0%

## ğŸ“‹ ã‚¹ãƒ©ã‚¤ãƒ‰ä¸€è¦§
### Slide 1: Metsuke-Core
...
```

---

## âš™ï¸ å®Ÿè¡Œæ–¹æ³•

### ç’°å¢ƒæ§‹ç¯‰

**å¿…é ˆè¦ä»¶**:
- Python 3.13+
- Apple Silicon Mac (MLXæœ€é©åŒ–)
- uv (æ¨å¥¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼)

**ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**:
```bash
# uvã§ä»®æƒ³ç’°å¢ƒä½œæˆ + ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
uv sync

# ã¾ãŸã¯ pip
pip install -r requirements.txt
```

**ä¸»è¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**:
- `mlx-lm>=0.29.1`: LLMæ¨è«–
- `mlx-vlm>=0.3.9`: Vision-Language Model
- `langgraph>=1.0.7`: ã‚¹ãƒ†ãƒ¼ãƒˆã‚°ãƒ©ãƒ•ç®¡ç†
- `pydantic>=2.12.5`: ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- `python-frontmatter>=1.1.0`: ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³frontmatterè§£æ

### å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

```bash
# ä»®æƒ³ç’°å¢ƒæœ‰åŠ¹åŒ–
source .venv/bin/activate

# ã‚¹ãƒ©ã‚¤ãƒ‰è§£æå®Ÿè¡Œ
python3 main.py
```

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. LLMãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰ (~500ms)
2. VLMãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰ (~900ms)
3. `slides.md`ã‹ã‚‰10ã‚¹ãƒ©ã‚¤ãƒ‰èª­ã¿è¾¼ã¿
4. ç”»åƒå‡¦ç† (ç¾åœ¨ã¯ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼)
5. ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆæŠ½å‡º (æœ€åˆã®3ã‚¹ãƒ©ã‚¤ãƒ‰ã€~7ç§’)
6. LangGraphè¦ç´„ (é•·æ–‡ã®å ´åˆã€~20ç§’)
7. JSON + Markdownå‡ºåŠ›ç”Ÿæˆ

**å®Ÿè¡Œæ™‚é–“**: ç´„30ç§’ (10ã‚¹ãƒ©ã‚¤ãƒ‰ã€3ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆæŠ½å‡ºã®å ´åˆ)

### è¨­å®šã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

`main.py`å†…ã®`Config`ã‚¯ãƒ©ã‚¹ã‚’ç·¨é›†:

```python
@dataclass
class Config:
    default_model: str = "mlx-community/Phi-3-mini-4k-instruct-4bit"
    keypoints_max_tokens: int = 100
    summary_chunk_slide_count: int = 4  # ãƒãƒ£ãƒ³ã‚¯ã‚ãŸã‚Šã‚¹ãƒ©ã‚¤ãƒ‰æ•°
    summary_min_slides_for_langgraph: int = 6  # LangGraphæœ‰åŠ¹åŒ–é–¾å€¤
```

---

## ğŸ”„ åŒæœŸãƒ»ä¾å­˜é–¢ä¿‚

### ãƒ¢ãƒ‡ãƒ«åŒæœŸ
- **åˆå›å®Ÿè¡Œæ™‚**: Hugging Face Hubã‹ã‚‰è‡ªå‹•ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
  - LLM: `mlx-community/Phi-3-mini-4k-instruct-4bit` (~2.5GB)
  - VLM: `mlx-community/llava-1.5-7b-4bit` (~4GB)
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥å ´æ‰€**: `~/.cache/huggingface/hub/`
- **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å®Ÿè¡Œ**: 2å›ç›®ä»¥é™ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰å³åº§ã«ãƒ­ãƒ¼ãƒ‰

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¾å­˜é–¢ä¿‚

```
mlx-lm â”€â”¬â”€ mlx >= 0.30.5
        â””â”€ huggingface-hub

mlx-vlm â”€â”¬â”€ mlx-lm
         â”œâ”€ torch >= 2.10.0  # ç”»åƒå‰å‡¦ç†ç”¨
         â””â”€ torchvision >= 0.25.0

langgraph â”€â”€â”€ langchain-core >= 1.2.8
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ä¾å­˜

```
slides.md (å…¥åŠ›)
    â†“
SlideLoader (frontmatterè§£æ)
    â†“
ImageProcessor (VLM) â”€â”€â†’ ç”»åƒèª¬æ˜
    â†“
ContentExtractor (LLM) â”€â”€â†’ ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ
    â†“                    â†˜
    â†“                     LangGraph (é•·æ–‡ã®å ´åˆ)
    â†“                    â†—
ExtractionResult
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               â”‚              â”‚
extraction_results.json    summary.md
```

---

## ğŸ“ å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼

### `slides.md` (Marpå½¢å¼)

```markdown
---
marp: true
theme: default
---

# ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«1

æœ¬æ–‡å†…å®¹...

![alt text](./img/image1.png)

---

# ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«2

...
```

**è¦ä»¶**:
- Marp frontmatterãƒ–ãƒ­ãƒƒã‚¯ (`---` ã§å›²ã‚€)
- ã‚¹ãƒ©ã‚¤ãƒ‰åŒºåˆ‡ã‚Š: `---`
- ç”»åƒ: Markdownç”»åƒè¨˜æ³• `![alt](path)`
- ã‚¿ã‚¤ãƒˆãƒ«: `# Title` (H1è¦‹å‡ºã—)

---

## ğŸ› æ—¢çŸ¥ã®å•é¡Œã¨å¯¾å‡¦

### 1. VLMç”»åƒèª¬æ˜ãŒå‹•ä½œã—ãªã„
**åŸå› **: mlx-vlmå†…éƒ¨ã§PyTorchãƒ†ãƒ³ã‚½ãƒ«å¤‰æ›ã‚¨ãƒ©ãƒ¼  
**å¯¾å‡¦**: ç¾åœ¨ã¯ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å‹•ä½œ (`[ç”»åƒ: {alt}]`)  
**å°†æ¥å¯¾å¿œ**: transformers VLMãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¸ã®åˆ‡ã‚Šæ›¿ãˆæ¤œè¨

### 2. æ—¥æœ¬èªLLMå‡ºåŠ›ã®æ–‡å­—åŒ–ã‘
**åŸå› **: Phi-3ãƒ¢ãƒ‡ãƒ«ã®æ—¥æœ¬èªUnicodeå‡ºåŠ›ã«ï¿½ã‚„ä¸æ­£æ–‡å­—  
**å¯¾å‡¦**: æ¦‚è¦ç”Ÿæˆã‚’ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ–ãƒ³æ–¹å¼ã«å¤‰æ›´æ¸ˆã¿  
**çµæœ**: å®‰å®šã—ãŸæ—¥æœ¬èªå‡ºåŠ›ã‚’å®Ÿç¾

### 3. é•·æ–‡ã‚¹ãƒ©ã‚¤ãƒ‰ (50æšä»¥ä¸Š) ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
**ç¾çŠ¶**: æœªæœ€é©åŒ–  
**æ¨å¥¨**: LangGraphãƒãƒ£ãƒ³ã‚¯è¨­å®šã®èª¿æ•´
```python
summary_chunk_slide_count: int = 8  # 4 â†’ 8ã«å¢—åŠ 
```

---

## ğŸ“š ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | èª¬æ˜ |
|---------|------|
| `main.py` | ãƒ¡ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£… (1047è¡Œ) |
| `slides.md` | å…¥åŠ›ã‚¹ãƒ©ã‚¤ãƒ‰ (Marpå½¢å¼) |
| `extraction_results.json` | JSONå‡ºåŠ› |
| `summary.md` | Markdownè¦ç´„å‡ºåŠ› |
| `pyproject.toml` | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¾å­˜é–¢ä¿‚ |
| `README.md` | æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ |

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼

```bash
# æŠ½å‡ºå“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹ç¢ºèª
python3 main.py

# ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«èª¿æ•´
# main.pyå†…ã§å¤‰æ›´:
logging.basicConfig(level=logging.DEBUG)
```

**å“è³ªæŒ‡æ¨™**:
- æŠ½å‡ºç‡: 100% (å…¨ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«æŠ½å‡º)
- å¹³å‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é•·: 200ã€œ300æ–‡å­—/ã‚¹ãƒ©ã‚¤ãƒ‰
- ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆç”ŸæˆæˆåŠŸç‡: ~90%

---

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãƒ»ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ

- **MLX**: Appleè£½ - Apple Siliconãƒã‚¤ãƒ†ã‚£ãƒ–æ©Ÿæ¢°å­¦ç¿’ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **LangGraph**: LangChainè£½ - ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **ãƒ¢ãƒ‡ãƒ«**:
  - Phi-3: Microsoftè£½å°å‹è¨€èªãƒ¢ãƒ‡ãƒ«
  - LLaVA: è¦–è¦šè¨€èªçµ±åˆãƒ¢ãƒ‡ãƒ«

---

## ğŸ”§ é–‹ç™ºè€…å‘ã‘æƒ…å ±

### ã‚¯ãƒ©ã‚¹æ‹¡å¼µ

æ–°ã—ã„æŠ½å‡ºæ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹å ´åˆ:

```python
class CustomExtractor:
    def __init__(self, model, tokenizer, config):
        self.model = model
        self.tokenizer = tokenizer
        self.config = config
    
    def extract(self, slides: list[Slide]) -> Any:
        # ã‚«ã‚¹ã‚¿ãƒ å‡¦ç†
        pass

# SlideExtractorã«çµ±åˆ
extractor.custom = CustomExtractor(model, tokenizer, config)
```

### ãƒ­ã‚°å‡ºåŠ›ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

```python
# ã‚ˆã‚Šè©³ç´°ãªãƒ­ã‚°
logger.setLevel(logging.DEBUG)

# ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›
file_handler = logging.FileHandler('extraction.log')
logger.addHandler(file_handler)
```

---

## PDFç”Ÿæˆ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)

Pandocã‚’ä½¿ç”¨ã—ãŸMermaidå›³è¡¨å…¥ã‚ŠPDFç”Ÿæˆ:

### å¿…è¦ãƒ„ãƒ¼ãƒ«
- Pandoc
- Node.js + mermaid-cli (`mmdc`)
- wkhtmltopdf (Pandoc PDFã‚¨ãƒ³ã‚¸ãƒ³)

### ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰
```bash
pandoc slides.md \
    --from=markdown+raw_html \
    --to=html \
    --standalone \
    --lua-filter=mermaid-filter.lua \
    --pdf-engine=wkhtmltopdf \
    --pdf-engine-opt=--enable-local-file-access \
    -o slides.pdf
```

### æ³¨æ„äº‹é …
- Mermaidãƒ–ãƒ­ãƒƒã‚¯ã¯`mmdc`çµŒç”±ã§`mermaid-filter.lua`ãŒSVGãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- `mmdc`ãŒPATHã«ãªã„å ´åˆã¯ç’°å¢ƒå¤‰æ•°`MMDC`ã«çµ¶å¯¾ãƒ‘ã‚¹è¨­å®š
